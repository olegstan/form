{"version":3,"file":"MultiSelect.js","names":["_react","_interopRequireWildcard","require","_styles","_styles2","_useBaseInput2","_interopRequireDefault","_ResultsWithCheckbox","_jsxRuntime","e","__esModule","_getRequireWildcardCache","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","f","o","next","done","push","value","isArray","MultiSelect","_ref","_ref$focused","focused","_ref$setFocused","setFocused","_ref$onBlur","onBlur","_ref$onKeyPress","onKeyPress","_ref$onChange","onChange","_ref$onClick","onClick","_ref$disabled","disabled","_ref$className","className","_ref$style","style","id","_ref$values","values","error","_ref$options","options","_ref$onChangeAll","onChangeAll","_useBaseInput","useBaseInput","handleFocus","handleBlur","getName","_useState","useState","_useState2","selectOpen","setSelectOpen","selectRef","useRef","fakeOnChange","handleChange","item","handleClose","handleChangeAll","areAllSelected","handleOpen","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","getPluralForm","useMemo","count","forms","absCount","Math","abs","index","concat","valueText","pluralForms","inputClassName","jsxs","StyledSelect","ref","children","jsx","StyledFakeInput","active","handleClick","handleClickAll","idPrefix","displayName","_default","exports"],"sources":["../../../../src/Form/Dropdown/MultiSelect/MultiSelect.tsx"],"sourcesContent":["import React, {useEffect, useMemo, useRef, useState} from 'react';\r\n//@ts-ignore\r\nimport {StyledSelect} from \"./styles\";\r\n//@ts-ignore\r\nimport {StyledFakeInput} from \"../../styles\";\r\n//@ts-ignore\r\nimport useBaseInput from \"../../hooks/useBaseInput\";\r\nimport MultiSelectProps from \"../../types/MultiSelectProps\";\r\nimport ResultsWithCheckbox from \"../components/ResultsWithCheckbox\";\r\n\r\nconst MultiSelect: React.FC<MultiSelectProps> = ({\r\n                                   focused = false,\r\n                                   setFocused = () => {},\r\n                                   onBlur = () => {},\r\n                                   onKeyPress = () => {},\r\n                                   onChange = () => {},\r\n                                   onClick = () => {},\r\n                                   disabled = false,\r\n                                   className = '',\r\n                                   style = {},\r\n                                   id,\r\n                                   name,\r\n                                   values= [],\r\n                                   error,\r\n                                   options = [],\r\n                                   onChangeAll = () => {},\r\n                               }) => {\r\n\r\n    const {\r\n        handleFocus,\r\n        handleBlur,\r\n        getName,\r\n    } = useBaseInput({\r\n        disabled,\r\n        name,\r\n        onClick,\r\n        onChange,\r\n        setFocused,\r\n        onBlur\r\n    });\r\n\r\n\r\n    // Локальный стейт: открыто ли меню\r\n    const [selectOpen, setSelectOpen] = useState(false);\r\n    const selectRef = useRef(null);\r\n\r\n    const fakeOnChange = () => {\r\n\r\n    }\r\n\r\n    const handleChange = (e: any, item: any) => {\r\n        onChange(item);\r\n        handleClose()\r\n    }\r\n\r\n    //функция для итема который выбирает все или снимает все\r\n    const handleChangeAll = () => {\r\n        const areAllSelected = values?.length === options?.length;\r\n        onChangeAll(!areAllSelected);\r\n        handleClose()\r\n    }\r\n\r\n    const handleOpen = (e: any) => {\r\n        setSelectOpen(true)\r\n        setFocused(true)\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setSelectOpen(false)\r\n        setFocused(false)\r\n    }\r\n\r\n    // // Обработка клика вне компонента\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: any) => {\r\n\r\n            // @ts-ignore\r\n            if (selectRef.current && !selectRef.current.contains(event.target)) {\r\n                handleClose()\r\n            }\r\n        };\r\n\r\n        // Добавляем обработчик события при монтировании компонента\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n\r\n        // Убираем обработчик события при размонтировании компонента\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [setSelectOpen]);\r\n\r\n    const getPluralForm = useMemo(\r\n        () => (count: number, forms: string[]) => {\r\n            const absCount = Math.abs(count);\r\n            const index =\r\n                absCount % 100 > 4 && absCount % 100 < 20\r\n                    ? 2\r\n                    : [2, 0, 1, 1, 1, 2][absCount % 10 < 5 ? absCount % 10 : 5];\r\n            return `${count} ${forms[index]}`;\r\n        },\r\n        []\r\n    );\r\n\r\n    // Текстовое представление выбранных значений\r\n    const valueText = useMemo(() => {\r\n        if (!values || values.length === 0) return '';\r\n        const count = values.length;\r\n        const pluralForms = ['элемент', 'элемента', 'элементов'];\r\n        return `Выбрано: ${getPluralForm(count, pluralForms)}`;\r\n    }, [values, getPluralForm]);\r\n\r\n    const inputClassName = `input ${className}${focused ? ' focused' : ''}${error?.[0] ? ' error' : ''}`;\r\n\r\n    return (<StyledSelect\r\n        onClick={handleOpen}\r\n        ref={selectRef}\r\n    >\r\n        <StyledFakeInput\r\n            id={id}\r\n            style={style}\r\n            className={inputClassName}\r\n            name={getName(name)}\r\n        >\r\n            {valueText}\r\n        </StyledFakeInput>\r\n        <ResultsWithCheckbox\r\n            active={selectOpen && !disabled}\r\n            id={id}\r\n            values={values}\r\n            options={options}\r\n            handleClick={handleChange}\r\n            handleClickAll={handleChangeAll}\r\n            idPrefix={getName(name)}\r\n        />\r\n    </StyledSelect>)\r\n}\r\n\r\nMultiSelect.displayName = 'MultiSelect';\r\n\r\nexport default MultiSelect;"],"mappings":"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","ignoreList":[]}