{"version":3,"file":"GroupSearch.js","names":["_react","_interopRequireWildcard","require","_styles","_styles2","_useBaseInput2","_interopRequireDefault","_useOnceWhen","_GroupResults","_jsxRuntime","e","__esModule","t","WeakMap","r","n","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Symbol","iterator","constructor","prototype","_createForOfIteratorHelper","Array","isArray","_unsupportedIterableToArray","length","_n","F","s","done","value","TypeError","a","u","next","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arrayLikeToArray","toString","slice","name","from","test","l","push","GroupSearch","_ref","_getName","_ref$focused","focused","_ref$setFocused","setFocused","_ref$onBlur","onBlur","_ref$onKeyDown","onKeyDown","_ref$onChange","onChange","_ref$onClick","onClick","_ref$disabled","disabled","_ref$className","className","_ref$style","style","id","error","_ref$options","options","_ref$search","search","_ref$onSearch","onSearch","_ref$clearOnClickOuts","clearOnClickOutside","_ref$addButton","addButton","_useState","useState","_useState2","selectOpen","setSelectOpen","selectRef","useRef","_useBaseInput","useBaseInput","handleFocus","handleBlur","getName","useOnceWhen","matchingOption","find","option","useEffect","handleClickOutside","event","_selectRef$current","current","contains","target","handleClose","findMatchedOption","_iterator","_step","toLowerCase","items","matchedInItems","err","undefined","matchedOption","document","addEventListener","removeEventListener","handleChange","stopPropagation","handleOpen","handleSearch","filteredOptions","useMemo","console","filter","warn","searchLower","parts","split","matchesOptionName","some","part","replace","includes","matchesItems","item","inputClassName","concat","jsxs","StyledSelect","ref","children","jsx","StyledInput","autoComplete","type","active","handleClick","idPrefix","displayName","_default","exports"],"sources":["../../../../src/Form/Dropdown/GroupSearch/GroupSearch.tsx"],"sourcesContent":["import React, {useEffect, useMemo, useRef, useState} from 'react';\r\n//@ts-ignore\r\nimport {StyledSelect} from './styles';\r\n//@ts-ignore\r\nimport {StyledInput} from '../../styles';\r\n//@ts-ignore\r\nimport useBaseInput from '../../hooks/useBaseInput';\r\n//@ts-ignore\r\nimport useOnceWhen from \"../../helpers/useOnceWhen\";\r\nimport GroupSearchProps from \"../../types/GroupSearchProps\";\r\nimport GroupResults from \"../components/GroupResults\";\r\n\r\nconst GroupSearch: React.FC<GroupSearchProps> = ({\r\n                                           focused = false,\r\n                                           setFocused = () => {},\r\n                                           onBlur = () => {},\r\n                                           onKeyDown = () => {},\r\n                                           onChange = () => {},\r\n                                           onClick = () => {},\r\n                                           disabled = false,\r\n                                           className = '',\r\n                                           style = {},\r\n                                           id,\r\n                                           name,\r\n                                           value,\r\n                                           error,\r\n                                           options = [],\r\n                                           search = '',\r\n                                           onSearch = () => {},\r\n                                           clearOnClickOutside = true,\r\n                                           addButton = false\r\n                                       }) => {\r\n\r\n    const [selectOpen, setSelectOpen] = useState(false);\r\n    const selectRef = useRef(null);\r\n\r\n\r\n    const {\r\n        handleFocus,\r\n        handleBlur,\r\n        getName,\r\n    } = useBaseInput({\r\n        disabled,\r\n        name,\r\n        onClick,\r\n        onChange,\r\n        setFocused,\r\n        onBlur\r\n    });\r\n\r\n    //обработка когда пришёл новый список и значение, проверяем можно ли установить из него search\r\n    useOnceWhen(value && options?.length, () => {\r\n        //@ts-ignore\r\n        const matchingOption = options.find(option => option.id === value);\r\n\r\n        if (matchingOption) {\r\n            // Здесь можно добавить любое другое действие\r\n            onSearch(matchingOption.name); // Например, вызов функции\r\n        }\r\n    });\r\n\r\n// // Обработка клика вне компонента\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: any) => {\r\n            // @ts-ignore\r\n            if (focused && selectRef.current && !selectRef.current?.contains(event.target)) {\r\n                handleClose()\r\n                //если элемент не выбран, то очистим поле поиска\r\n                if (!value) {\r\n                    const findMatchedOption = (options: any[]): any | undefined => {\r\n                        for (const option of options) {\r\n                            // Проверяем текущий уровень\r\n                            if (option.name && option.name.toLowerCase() === search.toLowerCase()) {\r\n                                return option;\r\n                            }\r\n\r\n                            // Если есть вложенные элементы, проверяем их\r\n                            if (option.items && Array.isArray(option.items)) {\r\n                                const matchedInItems = findMatchedOption(option.items);\r\n                                if (matchedInItems) {\r\n                                    return matchedInItems;\r\n                                }\r\n                            }\r\n                        }\r\n                        return undefined; // Если ничего не найдено\r\n                    };\r\n\r\n                    const matchedOption = findMatchedOption(options);\r\n\r\n                    // Если найдено совпадение, выбираем этот элемент\r\n                    if (matchedOption) {\r\n                        onChange(matchedOption);\r\n                    } else {\r\n                        if(clearOnClickOutside)\r\n                        {\r\n                            onSearch('');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        // Добавляем обработчик события при монтировании компонента\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n\r\n        // Убираем обработчик события при размонтировании компонента\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [search, value, options, setSelectOpen, onChange, focused]);\r\n\r\n    const handleChange = (event: React.MouseEvent<HTMLInputElement, MouseEvent>, option: any): void => {\r\n        event.stopPropagation();\r\n\r\n        onChange(option);\r\n        handleClose()\r\n    }\r\n\r\n    const handleOpen = (e: any) => {\r\n        setSelectOpen(true)\r\n        setFocused(true)\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setSelectOpen(false)\r\n        setFocused(false)\r\n    }\r\n\r\n    const handleSearch = (e: any) => {\r\n        onSearch(e.target.value);\r\n    }\r\n\r\n    const filteredOptions = useMemo(() => {\r\n        if (!Array.isArray(options)) {\r\n            console.error('Invalid options: expected an array');\r\n            return [];\r\n        }\r\n\r\n        return options.filter((option) => {\r\n\r\n            if (typeof option !== 'object' || option === null) {\r\n                console.warn('Invalid option: expected an object', option);\r\n                return false;\r\n            }\r\n\r\n            // Второе условие: если поисковый запрос пустой, проверяем наличие items\r\n            if (!search) {\r\n                // Если search пустой, показываем опцию только если есть items\r\n                //@ts-ignore\r\n                return option.items && option.items.length > 0;\r\n            }\r\n\r\n            // Третье условие: фильтрация по поисковому запросу\r\n            if (typeof search !== 'string') {\r\n                console.warn('Invalid search query: expected a string', search);\r\n                return false;\r\n            }\r\n\r\n            // Третье условие: фильтрация по поисковому запросу\r\n            const searchLower = search.toLowerCase();\r\n            const parts = searchLower.split(' ');\r\n\r\n            // Проверяем, есть ли совпадения в имени самой опции\r\n            const matchesOptionName =\r\n                typeof option.name === 'string' &&\r\n                parts.some((part) =>\r\n                    option.name\r\n                        .toLowerCase()\r\n                        .replace('ё', 'е')\r\n                        .replace('й', 'и')\r\n                        .includes(part.replace('ё', 'е').replace('й', 'и'))\r\n                );\r\n\r\n            // Проверяем, есть ли совпадения в именах вложенных items\r\n            //@ts-ignore\r\n            const matchesItems =\r\n                Array.isArray(option.items) &&\r\n                option.items.some((item) => {\r\n                    // Проверяем, что item является объектом\r\n                    if (typeof item !== 'object' || item === null) {\r\n                        console.warn('Invalid item: expected an object', item);\r\n                        return false;\r\n                    }\r\n\r\n                    // Проверяем, что item.name является строкой\r\n                    return (\r\n                        typeof item.name === 'string' &&\r\n                        parts.some((part) =>\r\n                            item.name\r\n                                .toLowerCase()\r\n                                .replace('ё', 'е')\r\n                                .replace('й', 'и')\r\n                                .includes(part.replace('ё', 'е').replace('й', 'и'))\r\n                        )\r\n                    );\r\n                });\r\n\r\n            // Опция показывается, если:\r\n            // 1. Есть совпадение в имени самой опции\r\n            // ИЛИ\r\n            // 2. Есть хотя бы один подходящий элемент в items\r\n            return matchesOptionName || matchesItems;\r\n        });\r\n    }, [options, value, search]);\r\n\r\n    // @ts-ignore\r\n    const inputClassName = `input ${className}${focused ? ' focused' : ''}${error?.[0] ? ' error' : ''}`;\r\n\r\n    return (<StyledSelect\r\n            onClick={handleOpen}\r\n            ref={selectRef}\r\n        >\r\n            <StyledInput\r\n                id={id}\r\n                autoComplete=\"off\"\r\n                disabled={disabled}\r\n                className={inputClassName}\r\n                type='text'\r\n                name={getName(name)}\r\n                value={search ?? ''}\r\n                onChange={handleSearch}\r\n            />\r\n            <GroupResults\r\n                addButton={addButton}\r\n                active={selectOpen && !disabled}\r\n                id={id}\r\n                options={filteredOptions}\r\n                handleClick={handleChange}\r\n                idPrefix={getName(name) ?? id}\r\n            />\r\n        </StyledSelect>\r\n    );\r\n}\r\n\r\nGroupSearch.displayName = 'GroupSearch';\r\n\r\nexport default GroupSearch;\r\n"],"mappings":"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","ignoreList":[]}