{"version":3,"file":"Select.js","names":["_react","_interopRequireWildcard","require","_useBaseInput2","_interopRequireDefault","_Results","_styles","_styles2","_jsxRuntime","e","__esModule","t","WeakMap","r","n","o","i","f","__proto__","_typeof","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","Symbol","iterator","u","next","done","push","value","isArray","Select","_ref","_ref$focused","focused","_ref$setFocused","setFocused","_ref$onBlur","onBlur","_ref$onKeyDown","onKeyDown","_ref$onChange","onChange","_ref$onClick","onClick","_ref$disabled","disabled","_ref$className","className","_ref$style","style","id","error","_ref$options","options","_ref$addButton","addButton","_useBaseInput","useBaseInput","handleFocus","handleBlur","getName","_useState","useState","_useState2","selectOpen","setSelectOpen","selectRef","useRef","fakeOnChange","handleChange","item","stopPropagation","handleClose","handleOpen","useEffect","handleClickOutside","event","_selectRef$current","current","contains","target","document","addEventListener","removeEventListener","filteredOptions","useMemo","filter","option","selectedOption","find","valueText","inputClassName","concat","jsxs","StyledSelect","undefined","ref","children","jsx","StyledFakeInput","active","handleClick","idPrefix","displayName","_default","exports"],"sources":["../../../../src/Form/Dropdown/Select/Select.tsx"],"sourcesContent":["import React, {useEffect, useMemo, useRef, useState} from 'react';\r\n//@ts-ignore\r\nimport useBaseInput from \"../../hooks/useBaseInput\";\r\nimport SelectProps from \"../../types/SelectProps\";\r\nimport Results from \"../components/Results\";\r\n\r\n//@ts-ignore\r\nimport {StyledFakeInput} from \"../../styles\";\r\n//@ts-ignore\r\nimport {StyledSelect} from \"./styles\";\r\n\r\nconst Select: React.FC<SelectProps> = ({\r\n                                           focused = false,\r\n                                           setFocused = () => {},\r\n                                           onBlur = () => {},\r\n                                           onKeyDown = () => {},\r\n                                           onChange = () => {},\r\n                                           onClick = () => {},\r\n                                           disabled = false,\r\n                                           className = '',\r\n                                           style = {},\r\n                                           id,\r\n                                           name,\r\n                                           value,\r\n                                           error,\r\n                                           options = [],\r\n                                           addButton = false,\r\n                                       }) => {\r\n\r\n    const {\r\n        handleFocus,\r\n        handleBlur,\r\n        getName,\r\n    } = useBaseInput({\r\n        disabled,\r\n        name,\r\n        onClick,\r\n        onChange,\r\n        setFocused,\r\n        onBlur\r\n    });\r\n\r\n\r\n    // Локальный стейт: открыто ли меню\r\n    const [selectOpen, setSelectOpen] = useState(false);\r\n    const selectRef = useRef(null);\r\n\r\n    const fakeOnChange = () => {\r\n\r\n    }\r\n\r\n    const handleChange = (e: any, item: any) => {\r\n        e.stopPropagation();\r\n\r\n        onChange(item);\r\n        handleClose()\r\n    }\r\n\r\n    const handleOpen = (e: any) => {\r\n        setSelectOpen(true)\r\n        setFocused(true)\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setSelectOpen(false)\r\n        setFocused(false)\r\n    }\r\n\r\n    // // Обработка клика вне компонента\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: any) => {\r\n            //@ts-ignore\r\n            if (selectRef.current && !selectRef.current?.contains(event.target)) {\r\n                handleClose()\r\n            }\r\n        };\r\n\r\n        // Добавляем обработчик события при монтировании компонента\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n\r\n        // Убираем обработчик события при размонтировании компонента\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [setSelectOpen]);\r\n\r\n    // // Подготавливаем список элементов (без выбранного)\r\n    const filteredOptions = useMemo(\r\n        () => options.filter((option) => option.id !== value),\r\n        [options, value]\r\n    );\r\n    const selectedOption = useMemo(\r\n        //@ts-ignore\r\n        () => options.find((option:any) => option.id === value),\r\n        [options, value]\r\n    );\r\n    const valueText = selectedOption ? selectedOption.name : '';\r\n    // @ts-ignore\r\n    const inputClassName = `styled-input__pseudo-input input ${className}${focused ? ' focused' : ''}${error?.[0] ? ' error' : ''}`;\r\n\r\n    return (\r\n        <StyledSelect\r\n            id={id ? 'wrapper-' + id : undefined}\r\n            className={`styled-input__select-wrapper`}\r\n            onClick={handleOpen}\r\n            ref={selectRef}\r\n        >\r\n            <StyledFakeInput\r\n                id={id}\r\n                style={style}\r\n                className={inputClassName}\r\n            >\r\n                {valueText}\r\n            </StyledFakeInput>\r\n            <Results\r\n                addButton={addButton}\r\n                className={`styled-input__results-list`}\r\n                active={selectOpen && !disabled}\r\n                id={id}\r\n                options={filteredOptions}\r\n                handleClick={handleChange}\r\n                idPrefix={getName(name)}\r\n            />\r\n        </StyledSelect>\r\n    )\r\n}\r\n\r\nSelect.displayName = 'Select';\r\n\r\nexport default Select;"],"mappings":"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","ignoreList":[]}