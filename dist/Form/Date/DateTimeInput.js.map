{"version":3,"file":"DateTimeInput.js","names":["_react","_interopRequireDefault","require","_useBaseInput2","_styles","_useDateInput2","_useFlatpickrMount2","_format","_jsxRuntime","_excluded","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_objectWithoutProperties","t","r","i","_objectWithoutPropertiesLoose","Object","getOwnPropertySymbols","n","length","indexOf","propertyIsEnumerable","call","hasOwnProperty","ownKeys","keys","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_toPrimitive","toPrimitive","TypeError","String","Number","DateTimeInput","_ref","_ref$focused","focused","_ref$setFocused","setFocused","_ref$onBlur","onBlur","_ref$innerError","innerError","_ref$setInnerError","setInnerError","_ref$onChange","onChange","_ref$onClick","onClick","_ref$disabled","disabled","_ref$placeholder","placeholder","_ref$className","className","_ref$style","style","id","name","_ref$autoComplete","autoComplete","error","_ref$defaultDate","defaultDate","_useBaseInput","useBaseInput","handleFocus","getName","_useFlatpickrMount","useFlatpickrMount","componentsLoaded","DateInputComponent","flatpickrInstance","_useDateInput","useDateInput","dateMask","dateFormat","formatDate","formatDateTime","date","dateString","handleDateChange","handleInputChange","handleBlur","getOptions","opts","allowInput","enableTime","enableSeconds","disableMobile","jsx","MaskedStyledInput","mask","children","inputProps","inputClassName","concat","Date","valueString","options","onReady","selectedDates","dateStr","fp","current","calendarContainer","onOpen","onClose","render","_ref2","refEl","restProps","onFocus","ref","displayName","_default","exports"],"sources":["../../../src/Form/Date/DateTimeInput.tsx"],"sourcesContent":["import React from 'react';\r\n\r\n// @ts-ignore\r\nimport useBaseInput from '../hooks/useBaseInput';\r\n// @ts-ignore\r\nimport {MaskedStyledInput} from '../styles';\r\nimport DateTimeInputProps from \"../types/DateTimeInputProps\";\r\nimport {useDateInput} from \"./hooks/useDateInput\";\r\nimport {useFlatpickrMount} from \"./hooks/useFlatpickrMount\";\r\nimport {formatDateTime} from \"./utils/format\";\r\n\r\nconst DateTimeInput: React.FC<DateTimeInputProps> = ({\r\n                         focused = false,\r\n                         setFocused = () => {},\r\n                         onBlur = () => {},\r\n                         innerError = [],//метод чтобьы показывать ошибку, если ввели неверный формат даты\r\n                         setInnerError = () => {},//метод чтобьы показывать ошибку, если ввели неверный формат даты\r\n                         onChange = () => {},\r\n                         onClick = () => {},\r\n                         disabled = false,\r\n                         placeholder = '',\r\n                         className = '',\r\n                         style = {},\r\n                         id,\r\n                         name,\r\n                         value,\r\n                         autoComplete = 'off',\r\n                         error,\r\n\r\n                         defaultDate = null,\r\n                       }) => {\r\n  const {\r\n    handleFocus,\r\n    getName,\r\n  } = useBaseInput({\r\n    disabled,\r\n    name,\r\n    onClick,\r\n    onChange,\r\n    setFocused,\r\n    onBlur\r\n  });\r\n\r\n  const { componentsLoaded, DateInputComponent, flatpickrInstance } = useFlatpickrMount();\r\n\r\n  const {\r\n    date,\r\n    dateString,\r\n    handleDateChange,\r\n    handleInputChange,\r\n    handleBlur\r\n  } = useDateInput({\r\n    value,\r\n    onChange,\r\n    onBlur,\r\n    flatpickrInstance,\r\n    setFocused,\r\n    dateMask: '__.__.____ __:__:__',\r\n    dateFormat: 'DD.MM.YYYY HH:mm:ss',\r\n    formatDate: formatDateTime,\r\n    setInnerError\r\n  });\r\n\r\n  // 8. Опции для Flatpickr (включаем время и секунды)\r\n  const getOptions = () => {\r\n    let opts = {\r\n      dateFormat: 'd.m.Y H:i:S',\r\n      allowInput: true,\r\n      enableTime: true,\r\n      enableSeconds: true,\r\n      disableMobile: 'true',\r\n    };\r\n\r\n    if (defaultDate) {\r\n      // @ts-ignore\r\n      opts.defaultDate = defaultDate;\r\n    }\r\n\r\n    return opts;\r\n  };\r\n\r\n  if (!componentsLoaded || !DateInputComponent) return null;\r\n\r\n  if (disabled) {\r\n    return (\r\n        // @ts-ignore\r\n        <MaskedStyledInput\r\n            mask=\"99.99.9999 99:99:99\"\r\n            value={dateString}\r\n            disabled\r\n            onChange={() => {}}\r\n        >\r\n          {(inputProps: any) => <input {...inputProps} />}\r\n        </MaskedStyledInput>\r\n    );\r\n  }\r\n\r\n  // @ts-ignore\r\n  const inputClassName = `input ${className}${focused ? ' focused' : ''}${error?.[0] || innerError?.[0] ? ' error' : ''}`;\r\n\r\n    return (\r\n      // @ts-ignore\r\n      <DateInputComponent\r\n          id={id}\r\n          style={style}\r\n          disabled={disabled}\r\n          value={date instanceof Date ? date : null}\r\n          valueString={dateString}\r\n          placeholder={placeholder}\r\n          autoComplete={autoComplete || 'off'}\r\n          options={getOptions()}\r\n          className={inputClassName}\r\n          //@ts-ignore\r\n          onReady={(selectedDates, dateStr, fp) => {\r\n            flatpickrInstance.current = fp;\r\n            fp.calendarContainer.id = `${id}-container`;\r\n          }}\r\n          onChange={handleDateChange}\r\n          onOpen={handleFocus}\r\n          onClose={handleBlur}\r\n          //@ts-ignore\r\n          render={({id, ...restProps}, refEl: any) => {\r\n\r\n              // @ts-ignore\r\n            return <MaskedStyledInput\r\n                autoComplete=\"off\"\r\n                mask=\"99.99.9999 99:99:99\"\r\n                name={getName(name)}\r\n                id={id}\r\n                value={restProps.valueString}\r\n                onChange={handleInputChange}\r\n                style={restProps.style}\r\n                className={restProps.className}\r\n                onFocus={handleFocus}\r\n            >\r\n              {(inputProps: any) => <input ref={refEl} {...inputProps} />}\r\n            </MaskedStyledInput>\r\n          }}\r\n      />\r\n  );\r\n}\r\n\r\nDateTimeInput.displayName = 'DateTimeInput';\r\n\r\nexport default DateTimeInput;"],"mappings":"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","ignoreList":[]}