{"version":3,"file":"mountFlatpickr.js","names":["_finhelper","require","_styles","_styledComponents","_interopRequireDefault","_templateObject","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_taggedTemplateLiteral","t","slice","Object","freeze","defineProperties","raw","value","_slicedToArray","r","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","toString","call","name","Array","from","test","length","n","l","i","u","f","next","done","push","isArray","_getRequireWildcardCache","WeakMap","_interopRequireWildcard","has","get","__proto__","defineProperty","getOwnPropertyDescriptor","hasOwnProperty","set","initFlatpickr","setComponentsLoaded","setFlatpickrComponent","isMounted","Promise","all","resolve","then","_ref","_ref2","flatpickrModule","reactFlatpickrModule","ruLocaleModule","Flatpickr","ReactFlatpickr","Russian","currentUrl","Url","getCurrentUrl","languageId","localStorage","getItem","shouldLocalizeToRussian","includes","parseInt","localize","error","console","StyledFlatpickr","styled","sharedInputStyle"],"sources":["../../../../src/Form/Date/utils/mountFlatpickr.js"],"sourcesContent":["import {Url} from \"finhelper\";\r\nimport {sharedInputStyle} from \"../../styles\";\r\nimport styled from \"styled-components\";\r\n\r\nexport default function initFlatpickr(setComponentsLoaded, setFlatpickrComponent) {\r\n    let isMounted = true;\r\n\r\n    Promise.all([\r\n        import('flatpickr'),\r\n        import('react-flatpickr'),\r\n        import('flatpickr/dist/l10n/ru.js'),\r\n        import('flatpickr/dist/flatpickr.css')\r\n    ])\r\n        .then(([flatpickrModule, reactFlatpickrModule, ruLocaleModule]) => {\r\n            if (!isMounted) return;\r\n\r\n            // Используем экспорт по умолчанию, если он есть\r\n            const Flatpickr = flatpickrModule.default || flatpickrModule;\r\n            const ReactFlatpickr = reactFlatpickrModule.default || reactFlatpickrModule;\r\n            const { Russian } = ruLocaleModule;\r\n\r\n            // Определяем, нужно ли локализовать в русский язык\r\n            const currentUrl = Url.getCurrentUrl();\r\n            const languageId = localStorage.getItem('language_id');\r\n            const shouldLocalizeToRussian = currentUrl.includes('/ru/') || parseInt(languageId, 10) === 1 || languageId === null;\r\n\r\n            if (shouldLocalizeToRussian) {\r\n                try {\r\n                    Flatpickr.localize(Russian);\r\n                } catch (error) {\r\n                    console.error(\"Ошибка при локализации Flatpickr:\", error);\r\n                }\r\n            }\r\n\r\n            // Создаём стилизованный компонент на базе ReactFlatpickr\r\n            const StyledFlatpickr = styled(ReactFlatpickr)`\r\n                ${sharedInputStyle}\r\n              `;\r\n\r\n            // Передаём компонент в состояние\r\n            setFlatpickrComponent(() => StyledFlatpickr);\r\n            setComponentsLoaded(true);\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Не удалось загрузить модули Flatpickr:\", error);\r\n        });\r\n\r\n    return () => {\r\n        isMounted = false;\r\n    };\r\n}\r\n"],"mappings":"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","ignoreList":[]}