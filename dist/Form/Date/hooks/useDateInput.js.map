{"version":3,"file":"useDateInput.js","names":["_react","require","_moment","_interopRequireDefault","e","__esModule","_slicedToArray","r","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","constructor","name","Array","from","test","length","n","l","Symbol","iterator","i","u","f","o","next","Object","done","push","value","isArray","useDateInput","exports","_ref","onChange","flatpickrInstance","setFocused","dateFormat","dateMask","formatDate","setInnerError","_useState","useState","_useState2","date","setDate","_useState3","_useState4","dateString","setDateString","useEffect","handleDateChange","selectedDates","dateObj","newDateString","handleInputChange","val","target","includes","parsedDate","moment","isValid","toDate","handleBlur","current"],"sources":["../../../../src/Form/Date/hooks/useDateInput.ts"],"sourcesContent":["import {useEffect, useState} from 'react';\r\nimport moment from 'moment';\r\n\r\nexport const useDateInput = ({\r\n                                //@ts-ignore\r\n                                 value, onChange, flatpickrInstance, setFocused, dateFormat, dateMask, formatDate, setInnerError\r\n                            }) => {\r\n    const [date, setDate] = useState(value);\r\n    const [dateString, setDateString] = useState(formatDate(value, dateFormat));\r\n\r\n    useEffect(() => {\r\n        if (value !== date) {\r\n            setDate(value);\r\n            setDateString(formatDate(value, dateFormat));\r\n        }\r\n    }, [value, date, dateFormat]);\r\n\r\n    const handleDateChange = (selectedDates: any) => {\r\n        const dateObj = selectedDates?.[0];\r\n        const newDateString = dateObj ? formatDate(dateObj, dateFormat) : '';\r\n        setDate(dateObj);\r\n        setDateString(newDateString);\r\n        if (typeof onChange === 'function') {\r\n            onChange(dateObj ?? null);\r\n        }\r\n    };\r\n\r\n    const handleInputChange = (e: any) => {\r\n        const val = e.target.value;\r\n        setDateString(val);\r\n        if (val && !val.includes('_')) {\r\n            const parsedDate = moment(val, dateFormat);\r\n            if (parsedDate.isValid()) {\r\n                setDate(parsedDate.toDate());\r\n                if (typeof onChange === 'function') {\r\n                    onChange(parsedDate.toDate());\r\n                }\r\n            }else{\r\n                setInnerError(['Ошибка, неверный формат даты']);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleBlur = () => {\r\n        setFocused(false);\r\n\r\n        if (flatpickrInstance.current) {\r\n            if (\r\n                typeof dateString === 'string' &&\r\n                dateString !== dateMask &&\r\n                //@ts-ignore\r\n                !dateString.includes('_')\r\n            ) {\r\n                const parsedDate = moment(dateString, dateFormat);\r\n                if (parsedDate.isValid()) {\r\n                    onChange(parsedDate.toDate());\r\n                    setInnerError(null);\r\n                } else {\r\n                    onChange(null);\r\n                    setDateString('');\r\n                }\r\n            } else {\r\n                onChange(null);\r\n                setDateString('');\r\n            }\r\n        }\r\n    };\r\n\r\n    return { date, dateString, handleDateChange, handleInputChange, handleBlur, setDateString };\r\n};"],"mappings":"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","ignoreList":[]}